<!DOCTYPE html>
<html>
	<head>
		<script>
			safari.application.addEventListener( "command", function( event ) {
				if( event.command === "Pinlet" ) {
					var tab = event.target.browserWindow.activeTab;
					
					event.target.popover.contentWindow.populateForm( {
						url: tab.url,
						title: tab.title
					} );
					
					event.target.showPopover();
				}
			}, false );
		
			safari.application.addEventListener( "validate", function( event ) {
				if( event.command === "Pinlet" ) {
					event.target.disabled = !event.target.browserWindow.activeTab.url;
				}
			}, false );
		</script>
	</head>
	<body></body>
</html>